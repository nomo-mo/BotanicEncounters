<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.app.mapper.HomeMapper">

    <resultMap id="homeMap" type="Home" autoMapping="true">
        <association property="location">
            <id property="id" column="location_id" />
            <result property="name" column="location_name" />
        </association>
    </resultMap>

    <select id="selectAll" resultMap="homeMap">
		SELECT
		 plants.id,  
		 locations.id AS location_id, 
		 locations.name AS location_name,
		 plants.plant_cpl, 
		 plants.plant_name,
		 plants.japanese_name, 
		 plants.scientific_name, 
		 plants.genus_name,
		 plants.description, 
		 plants.image_path
		FROM plants
		JOIN locations
		  ON plants.location_id = locations.id
	</select>

 

    <select id="selectById" resultMap="homeMap" parameterType="int">
       SELECT
		 plants.id,  
		 locations.id AS location_id, 
		 locations.name AS location_name,
		 plants.plant_cpl, 
		 plants.plant_name,
		 plants.japanese_name, 
		 plants.scientific_name, 
		 plants.genus_name,
		 plants.description, 
		 plants.image_path
		FROM plants
		JOIN locations
		ON plants.location_id = locations.id
		WHERE plants.id = #{id}
    </select>
    
    <select id="selectByCategory" resultMap="homeMap" parameterType="string">
        SELECT plants.id, locations.id AS location_id, locations.name AS location_name,
               plants.plant_cpl, plants.plant_name, plants.japanese_name, plants.scientific_name, 
               plants.genus_name, plants.description, plants.image_path
        FROM plants
        JOIN locations ON plants.location_id = locations.id
        WHERE locations.name = #{category}
    </select>

</mapper>